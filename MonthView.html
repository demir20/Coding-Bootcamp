<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>
  <style>
.jumbotron {
  padding-top: 2rem;
  text-align: center;
  background-color: transparent;
  color: black;
    }
    
.past {
  background-color: #ffcccb;
}

.present {
  background-color: #add8e6;
}

.future {
  background-color: #a4d1a2;
}

.btn-info {
    width: 25%;
    margin-bottom: 1em;
  }

.dayOfWeek {
    height: 60px;
    font-size: 20px;
    padding-top: 20px;
    width: 100%;
  }
.dateHold {
    height: 100px;
    width: 100%;
  }

.holdDayView {
 height: 60px;
 width: 60%;
 margin-left: 20%;
  }

.col-2 {
  padding-top: 14px;
  font-size: 20px;
 }

.col, .col-2,.col-10 {
  text-align: center;
  }
      
.dateButton {
  border-radius: 50%;
  font-size: 12px;
  text-align: center;
  background-color:transparent;
  color: #45464c;
  border:none;
  height: 20px;
  width: 20px;
  line-height:12px;
  vertical-align: baseline;
  padding: 0px;
  position: relative;
  white-space: nowrap;
}

.box,.col-2,.col-10 {
  border: black solid 2px;
}

#cancelEvent, #addEvent {
    width: 35%;
    margin-bottom: 1rem;
  }

.btn-dark {
    width: 20%;
  }

#holdCal, #holdDaily {
    margin-top: -5em;
    margin-bottom: 1em
  }

#holdDaily, #backToCal {
  display: none;
}

#backToCal {
  margin: 1em
}

p {
 font-size: 12pt;
}

#showToday, #clearCal {
  width: 25%;
  margin-top: 1em;
}

.quoteButton {
    border-radius: 50%;
    font-size: 12px;
    text-align: center;
    background-color: goldenrod;
    color:black;
    border:black solid 2px;
    height: 40px;
    width: 40px;
    padding: 0px;
    white-space: nowrap;
    display: block;
    margin: 0 auto;
    margin-top: 10px;
  }

textarea {
    resize: none;
    border: black solid 2px;
    font-size: 8pt;
    width: 80%;
    margin: 0;
    }

  </style>
      <header class="jumbotron">
        <container>
      <div class="row justify-content-center">
        <h1 class="display-3">Calendar</h1>
      </div>
      <div class="row justify-content-center">
        <p id="currentDay" class="lead"></p>
      </div>
      <div class="row justify-content-center">
        <p>Welcome! Click on the day number to view your daily events. Save your Daily Planner by clicking "Return to Calendar". Click on the yellow button for a random quote. Clear Calendar will clear all your events. Happy planning!</p>
      </div>
      <div class="row justify-content-around">
        <button type="button" class="btn btn-dark btn-block" id="priorMonth">Previous Month</button>
        <button type="button" class="btn btn-info btn-block" data-toggle="modal" data-target="#inputEvent" id="plusEvent">Add Event +</button>
        <button type="button" class="btn btn-dark btn-block" id="nextMonth">Next Month</button>
      </div>
      <div class="row justify-content-around">
        <button type="button" class="btn btn-success btn-block" id="showToday">View Daily Planner</button>
        <button class="btn btn-danger" id="clearCal">Clear Calendar</button>
      </div>
      </container>
    </header>
  <body>
      <div class="container" id="holdCal">
          <div class="row dayOfWeek">
              <div class="col">Mon</div>
              <div class="col">Tue</div>
              <div class="col">Wed</div>
              <div class="col">Thurs</div>
              <div class="col">Fri</div>
              <div class="col">Sat</div>
              <div class="col">Sun</div>
          </div>
          <div class="row dateHold">
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
        </div>
        <div class="row dateHold">
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
        </div>
        <div class="row dateHold">
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
        </div>
        <div class="row dateHold">
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
        </div>
        <div class="row dateHold">
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
        </div>
        <div class="row dateHold">
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
            <div class="col box"></div>
        </div>
      </div>
    <div class="container" id="holdDaily">
      <div class="row holdDayView">
        <div class="col-2 nine">9:00</div>
        <textarea id="nineOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 ten">10:00</div>
        <textarea id="tenOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 eleven">11:00</div>
        <textarea id="elevenOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 twelve">12:00</div>
        <textarea id="twelveOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 one">1:00</div>
        <textarea id="oneOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 two">2:00</div>
        <textarea id="twoOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 three">3:00</div>
        <textarea id="threeOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 four">4:00</div>
        <textarea id="fourOclock"></textarea>
      </div>
      <div class="row holdDayView">
        <div class="col-2 five">5:00</div>
        <textarea id="fiveOclock"></textarea>
      </div>
      <div class="row justify-content-center">
      <button type="button" class="btn btn-dark btn-block" id="backToCal">Return to Calendar</button>
    </div>
    </div>

       <!-- Modal -->
  <div class="modal fade" id="inputEvent" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Please add event details below.</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form id="eventForm" class="was-validated">
                <div class="form-group">
                  <label for="EventTitle">Event Title</label>
                  <input type="text" class="form-control" id="eventTitle" placeholder="Event Title" name="eventDescrip" required>
                </div>
                <div class="form-group">
                  <label for="Location">Event Location</label>
                  <input type="text" class="form-control" id="eventLocation" placeholder="Event Location" name="local" required>
                </div>
                <div class="form-row">
                  <div class="form-group col-md-6">
                      <label for="inputMonth">Month</label>
                      <select id="inputMonth" class="form-control" name="Month" required>
                        <option selected></option>
                        <option>January</option>
                        <option>February</option>
                        <option>March</option>
                        <option>April</option>
                        <option>May</option>
                        <option>June</option>
                        <option>July</option>
                        <option>August</option>
                        <option>September</option>
                        <option>October</option>
                        <option>November</option>
                        <option>December</option>
                      </select>
                    </div>
                    <div class="form-group col-md-6">
                      <label for="inputDay">Day</label>
                      <select id="inputDay" class="form-control" name="Day" required>
                        <option selected></option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                        <option>13</option>
                        <option>14</option>
                        <option>15</option>
                        <option>16</option>
                        <option>17</option>
                        <option>18</option>
                        <option>19</option>
                        <option>20</option>
                        <option>21</option>
                        <option>22</option>
                        <option>23</option>
                        <option>24</option>
                        <option>25</option>
                        <option>26</option>
                        <option>27</option>
                        <option>28</option>
                        <option>29</option>
                        <option>30</option>
                        <option>31</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputStartTime">Start Time</label>
                        <select id="inputStartTime" class="form-control" name="startTime" required>
                          <option selected></option>
                          <option>9:00</option>
                          <option>10:00</option>
                          <option>11:00</option>
                          <option>12:00</option>
                          <option>1:00</option>
                          <option>2:00</option>
                          <option>3:00</option>
                          <option>4:00</option>
                          <option>5:00</option>
                        </select>
                      </div>
                      <div class="form-group col-md-6">
                        <label for="inputEndTime">End Time</label>
                        <select id="inputEndTime" class="form-control" name="endTime" required>
                          <option selected></option>
                          <option>9:00</option>
                          <option>10:00</option>
                          <option>11:00</option>
                          <option>12:00</option>
                          <option>1:00</option>
                          <option>2:00</option>
                          <option>3:00</option>
                          <option>4:00</option>
                          <option>5:00</option>
                        </select>
                      </div>
                    </div>
                </div>
                <div class="form-row justify-content-around">
                <button type="button" class="btn btn-danger" id="cancelEvent" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-success" id="addEvent">Save to Calendar</button>
            </div>
            </form>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

<!-- Modal -->
    <div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="eventModalLabel">Here are your events for this date</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="placeEventsHere">
          </div>
          <div class="modal-footer">
          </div>
        </div>
      </div>
    </div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script>
//Enable popovers
$(document).ready(function(){
  $('[data-toggle="popover"]').popover();   
});

//Get quotes from API
fetch("https://type.fit/api/quotes")
  .then(function(response) {
    return response.json();
  })
  .then(function(data) {
    v=0;
    for (v=0;v<$('.quoteButton').length;v++) {
    var pickQuote = Math.floor(Math.random()*1643);
    $('.quoteButton').eq(v).popover({title: "Today's Quote", content: data[pickQuote]['text'] + " - " + data[pickQuote]['author'], placement: "top"});
    }
});

//Clear Calendar on click
$('#clearCal').click(function() {
  eventDetails.length=0;
  localStorage.setItem('eventDetails',eventDetails);
  });

  eventDetails=[];

//Executed to add event
  $("form").submit(function(e){
    e.preventDefault();
    var currentYear = d.getFullYear();
    var whichDay = $('#inputDay').val();
    var pickMonth = $('#inputMonth').val();
    var eventStart = $('#inputStartTime').val();
    var eventEnd = $('#inputEndTime').val();
    var event = $( "#eventTitle" ).val();       
    var location = $( "#eventLocation" ).val();
    function daysInMonth (month, year) {
          return new Date(year, month, 0).getDate();
      };
    var howManyDays = daysInMonth(monthNum,currentYear);
    if (whichDay>howManyDays) {
      alert("That day and month combination does not exist.");
      return;
    };
    var monthAsNum = undefined;
    switch (pickMonth) {
      case "January": monthAsNum=0;
      break;
      case "February": monthAsNum=1;
      break;
      case "March": monthAsNum=2;
      break;
      case "April": monthAsNum=3;
      break;
      case "May": monthAsNum=4;
      break;
      case "June": monthAsNum=5;
      break;
      case "July": monthAsNum=6;
      break;
      case "August": monthAsNum=7;
      break;
      case "September": monthAsNum=8;
      break;
      case "October": monthAsNum=9;
      break;
      case "November": monthAsNum=10;
      break;
      case "December": monthAsNum=11;
      break;
    }
    var militaryTimeEnd = undefined;
    var militaryTimeStart = undefined;
    switch (eventEnd) {
      case "1:00": militaryTimeEnd=13;
      break;
      case "2:00": militaryTimeEnd=14;
      break;
      case "3:00": militaryTimeEnd=15;
      break;
      case "4:00": militaryTimeEnd=16;
      break;
      case "5:00": militaryTimeEnd=17;
      break;
    }
    switch (eventStart) {
      case "1:00": militaryTimeStart=13;
      break;
      case "2:00": militaryTimeStart=14;
      break;
      case "3:00": militaryTimeStart=15;
      break;
      case "4:00": militaryTimeStart=16;
      break;
      case "5:00": militaryTimeStart=17;
      break;
    }
    var eventEndHour = new Date(currentYear,monthAsNum,whichDay,militaryTimeEnd).getHours();
    var eventStartHour = new Date(currentYear,monthAsNum,whichDay,militaryTimeStart).getHours();
    if (eventStartHour>eventEndHour) {
      alert("The event end time must be after the event start time.");
      return;
    };
    var obj={}
    obj['event']= event;
    obj['location']= location;
    obj['start']= eventStart;
    obj['end']= eventEnd;
    obj['day']= whichDay;
    obj['month']= pickMonth;
    eventDetails.push(obj);
    $('#inputEvent').modal('toggle');
    var eventText = $(document.createElement('p'));
    $(eventText).text(event + " @ " + location + " from " + eventStart + " to " + eventEnd);
    var getArray = localStorage.getItem('eventDetails');
    var savedArray = JSON.parse(getArray);
    if (savedArray) {
     eventDetails = savedArray;
    }
});

//Update colors on daily planner to indicate past present or future
  var currentHour = (moment().format('h a'));
        var whichDay = (moment().format('dddd'));
        if (currentHour == 9+" am") {
            $(".nine").addClass("present");
            $(".ten,.eleven,.twelve,.one,.two,.three,.four,.five").addClass("future");
        }
        if (currentHour == 10+" am") {
            $(".ten").addClass("present");
            $(".eleven,.twelve,.one,.two,.three,.four,.five").addClass("future");
            $(".nine").addClass("past");
        }
        if (currentHour == 11+" am") {
            $(".eleven").addClass("present");
            $(".twelve,.one,.two,.three,.four,.five").addClass("future");
            $(".nine,.ten").addClass("past");
        }
        if (currentHour == 12+" pm") {
            $(".twelve").addClass("present");
            $(".one,.two,.three,.four,.five").addClass("future");
            $(".nine,.ten,.eleven").addClass("past");
        }
        if (currentHour == 1+" pm") {
            $(".one").addClass("present");
            $(".two,.three,.four,.five").addClass("future");
            $(".nine,.ten,.eleven,.twelve").addClass("past");
        }
        if (currentHour == 2+" pm") {
            $(".two").addClass("present");
            $(".three,.four,.five").addClass("future");
            $(".nine,.ten,.eleven,.twelve,.one").addClass("past");
        }
        if (currentHour == 3+" pm") {
            $(".three").addClass("present");
            $(".four,.five").addClass("future");
            $(".nine,.ten,.eleven,.twelve,.one,.two").addClass("past");
        }
        if (currentHour == 4+" pm") {
            $(".four").addClass("present");
            $(".five").addClass("future");
            $(".nine,.ten,.eleven,.twelve,.one,.two,.three").addClass("past");
        }
        if (currentHour == 5+" pm") {
            $(".five").addClass("present");
            $(".nine,.ten,.eleven,.twelve,.one,.two,.three,.four").addClass("past");
        }
        else {
            $(".nine,.ten,.eleven,.twelve,.one,.two,.three,.four, .five").addClass("past");
        }

//Display current month and append date buttons to each calendar box
      $("#currentDay").html(moment().format('MMMM YYYY'));
      var dayNum = parseInt(moment().format('D'));
      var monthNum= parseInt(moment().format('MM'));
      var date=moment().format("MMM 1 YYYY");
      var d = new Date(date);
      var day = d.getDay();
      var currentMonth= d.getMonth();
      var currentYear = d.getFullYear();
      function daysInMonth (month, year) {
          return new Date(year, month, 0).getDate();
      }
      switch (true) {
        case day==0:
          z=6;
          r =1;
           for (z=6;r<=daysInMonth(monthNum,currentYear);r++,z++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==1:
          z=0;
          r =1;
           for (z=0;r<=daysInMonth(monthNum,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==2:
          z=1;
          r =1;
           for (z=1;r<=daysInMonth(monthNum,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==3:
          z=2;
          r =1;
           for (z=2;r<=daysInMonth(monthNum,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==4:
          z=3;
          r =1;
           for (z=3;r<=daysInMonth(monthNum,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==5:
          z=4;
          r =1;
           for (z=4;r<=daysInMonth(monthNum,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
           case day==6:
          z=5;
          r =1;
           for (z=4;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
      }

      //Color each calendar box
      var i =0;
      for (i=0;i<=31;i++) {
          if ($('.dateButton').eq(i).text()>dayNum){;
            $('.dateButton').eq(i).parent().addClass('future');
          }
          if ($('.dateButton').eq(i).text()<dayNum){;
            $('.dateButton').eq(i).parent().addClass('past');
          }
          if ($('.dateButton').eq(i).text()==dayNum){;
            $('.dateButton').eq(i).parent().addClass('present');
          }
      }

      //Color each empty box dark grey
      var f=0;
      for(f=0;f<=42;f++) {
        if ($('.box').eq(f).children().length==0) {
          $('.box').eq(f).css('backgroundColor','grey');
        }
      }

        $('.dateButton').hover(onEnter,onLeave);
        
        //On hover, change the background color of the date button. On leave revert back
        function onEnter (){
            if ($(this).parent().hasClass('present')) {
                $(this).css({"background-color":"#1e3f66","color":"white"});
            }
            if ($(this).parent().hasClass('past')) {
                $(this).css({"background-color":"#990000","color":"white"});
            }
            if ($(this).parent().hasClass('future')) {
                $(this).css({"background-color":"#006400","color":"white"});
            }
        };
        function onLeave (){
            $(this).css({"background-color":"transparent","color":" #45464c"});
        };

  //Switch to daily planner
  $('#showToday').click(function(){
    $('#currentDay').html(moment().format('MMMM Do h:mm a'));
    $('#priorMonth').css('display','none');
    $('#nextMonth').css('display','none');
    $('#plusEvent').css('display','none');
    $('#clearCal').css('display','none');
    $('#holdCal').css('display','none');
    $('#holdDaily').css('display','block');
    $('#backToCal').css('display','block');
    $('#showToday').css('display','none');
    $('#nineOclock').val(localStorage.getItem('nineOclock'));
    $('#tenOclock').val(localStorage.getItem('tenOclock'));
    $('#elevenOclock').val(localStorage.getItem('elevenOclock'));
    $('#twelveOclock').val(localStorage.getItem('twelveOclock'));
    $('#oneOclock').val(localStorage.getItem('oneOclock'));
    $('#twoOclock').val(localStorage.getItem('twoOclock'));
    $('#threeOclock').val(localStorage.getItem('threeOclock'));
    $('#fourOclock').val(localStorage.getItem('fourOclock'));
    $('#fiveOclock').val(localStorage.getItem('fiveOclock'));
  });
  
  //Switch back to calendar
  $('#backToCal').click(function(){
    $('#currentDay').html(moment().format('MMMM YYYY'));
    $('#priorMonth').css('display','block');
    $('#nextMonth').css('display','block');
    $('#plusEvent').css('display','block');
    $('#holdCal').css('display','block');
    $('#holdDaily').css('display','none');
    $('#backToCal').css('display','none');
    $('#showToday').css('display','block');
    localStorage.setItem('nineOclock',$('#nineOclock').val());
    localStorage.setItem('tenOclock',$('#tenOclock').val());
    localStorage.setItem('elevenOclock',$('#elevenOclock').val());
    localStorage.setItem('twelveOclock',$('#twelveOclock').val());
    localStorage.setItem('oneOclock',$('#oneOclock').val());
    localStorage.setItem('twoOclock',$('#twoOclock').val());
    localStorage.setItem('threeOclock',$('#threeOclock').val());
    localStorage.setItem('fourOclock',$('#fourOclock').val());
    localStorage.setItem('fiveOclock',$('#fiveOclock').val());
  });

  //Display event when clicking on calendar date
  $('.dateButton').attr('data-toggle',"modal");
    $('.dateButton').attr('data-target',"#eventModal");
    $('.dateButton').click(function() {
      var m=0;
      $('#placeEventsHere').children().remove();
      for (m=0;m<eventDetails.length;m++) {
        if(eventDetails[m]['day']==$(this).text() && eventDetails[m]['month'].charAt(1)==$('#currentDay').text().charAt(1) && eventDetails[m]['month'].charAt(2)==$('#currentDay').text().charAt(2)) {
          var eventHolder = $('<p></p>');
          $(eventHolder).text(eventDetails[m]['event'] + " @ " + eventDetails[m]['location'] + " from " + eventDetails[m]['start'] + " to " + eventDetails[m]['end']);
          $('#placeEventsHere').append($(eventHolder).last());
        }
      }
    }
);

$('#priorMonth').click(priorMonth);

//Execute code when going to previous month
function priorMonth () {
      $('.quoteButton').popover("hide");
      $('.dateButton').remove();
      $('.quoteButton').remove();
      var dayNum = parseInt(moment().format('D'));
      var whatMonth = $("#currentDay").text().charAt(0)+$("#currentDay").text().charAt(1)+$("#currentDay").text().charAt(2);
      var numOfMonth=undefined;
      var previous=undefined;
      switch (whatMonth) {
        case "Nov": numOfMonth="10"; previous=9;
        break;
        case "Oct": numOfMonth="9"; previous=8;
        break;
        case "Sep": numOfMonth="8"; previous=7;
        break;
        case "Aug": numOfMonth="7"; previous=6;
        break;
        case "Jul": numOfMonth="6"; previous=5;
        break;
        case "Jun": numOfMonth="5"; previous=4;
        break;
        case "May": numOfMonth="4"; previous=3;
        break;
        case "Apr": numOfMonth="3"; previous=2;
        break;
        case "Mar": numOfMonth="2"; previous=1;
        break;
        case "Feb": numOfMonth="1"; previous=0;
        break;
        case "Jan": numOfMonth="0"; previous=11;
        break;
        case "Dec": numOfMonth="11"; previous=10;
        break;
      }
      var priorMonth= parseInt(moment().format(numOfMonth));
      var firstOfMonth = new Date(currentYear,previous,1);
      var date=moment(firstOfMonth).format('MMM D YYYY');
      var d = new Date(date);
      var day = d.getDay();
      var displayMonth = new Date(currentYear,previous);
      $("#currentDay").html(moment(displayMonth).format('MMMM YYYY'));
      switch (true) {
        case day==0:
          z=6;
          r =1;
           for (z=6;r<=daysInMonth(priorMonth,currentYear);r++,z++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==1:
          z=0;
          r =1;
           for (z=0;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==2:
          z=1;
          r =1;
           for (z=1;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==3:
          z=2;
          r =1;
           for (z=2;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==4:
          z=3;
          r =1;
           for (z=3;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==5:
          z=4;
          r =1;
           for (z=4;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
           case day==6:
          z=5;
          r =1;
           for (z=5;r<=daysInMonth(priorMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(quoteButton).text("QOD");
            $(dateButton).eq(0).text(r);
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        }
      var f=0;
      for(f=0;f<=42;f++) {
        if ($('.box').eq(f).children().length==0) {
          $('.box').eq(f).css('backgroundColor','grey');
        }
      }
      if ($('#currentDay').text()==moment().format('MMMM YYYY')) {
      var i =0;
      for (i=0;i<=31;i++) {
          if ($('.dateButton').eq(i).text()>dayNum){
            $('.dateButton').eq(i).parent().css('backgroundColor','#a4d1a2');
            $('.dateButton').eq(i).parent().addClass('future');
          }
          if ($('.dateButton').eq(i).text()<dayNum){
            $('.dateButton').eq(i).parent().css('backgroundColor','#ffcccb');
            $('.dateButton').eq(i).parent().addClass('past');
          }
          if ($('.dateButton').eq(i).text()==dayNum){
            $('.dateButton').eq(i).parent().css('backgroundColor','#add8e6');
            $('.dateButton').eq(i).parent().addClass('present');
          }
      }
      $('.dateButton').hover(onEnter,onLeave);
            
            function onEnter (){
                if ($(this).parent().hasClass('present')) {
                    $(this).css({"background-color":"#1e3f66","color":"white"});
                }
                if ($(this).parent().hasClass('past')) {
                    $(this).css({"background-color":"#990000","color":"white"});
                }
                if ($(this).parent().hasClass('future')) {
                    $(this).css({"background-color":"#006400","color":"white"});
                }
            };
            function onLeave (){
                $(this).css({"background-color":"transparent","color":" #45464c"});
            };
    }
    else {
      $('.box').css('backgroundColor','lightgray');
      $('.dateButton').hover(onEnter2,onLeave2);
      function onEnter2 (){
            $(this).css({"background-color":"lightslategray","color":"white"})
      };
        function onLeave2 (){
            $(this).css({"background-color":"transparent","color":" #45464c"});
      };
      var f=0;
      for(f=0;f<=42;f++) {
        if ($('.box').eq(f).children().length==0) {
          $('.box').eq(f).css('backgroundColor','grey');
        }
      }
    }
    $('.dateButton').attr('data-toggle',"modal");
    $('.dateButton').attr('data-target',"#eventModal");
    $('.dateButton').click(function() {
      var m=0;
      $('#placeEventsHere').children().remove();
      for (m=0;m<eventDetails.length;m++) {
        if(eventDetails[m]['day']==$(this).text() && eventDetails[m]['month'].charAt(1)==$('#currentDay').text().charAt(1) && eventDetails[m]['month'].charAt(2)==$('#currentDay').text().charAt(2)) {
          var eventHolder = $('<p></p>');
          $(eventHolder).text(eventDetails[m]['event'] + " @ " + eventDetails[m]['location'] + " from " + eventDetails[m]['start'] + " to " + eventDetails[m]['end']);
          $('#placeEventsHere').append($(eventHolder).last());
        }
      }
    }
);
fetch("https://type.fit/api/quotes")
  .then(function(response) {
    return response.json();
  })
  .then(function(data) {
    v=0;
    for (v=0;v<$('.quoteButton').length;v++) {
    var pickQuote = Math.floor(Math.random()*1643);
    $('.quoteButton').eq(v).popover({title: "Today's Quote", content: data[pickQuote]['text'] + " - " + data[pickQuote]['author'], placement: "top"});
    }
  });
  if ($('#currentDay').html()==moment().format('MMMM YYYY')) {
    $('#showToday').css('display','block');
  }
  else {
    $('#showToday').css('display','none');
  }
}

  $('#nextMonth').click(nextMonth);

//Execute code when going to next month
  function nextMonth () {
      $('.quoteButton').popover("hide");
      $('.dateButton').remove();
      $('.quoteButton').remove();
      var dayNum = parseInt(moment().format('D'));
      var whatMonth = $("#currentDay").text().charAt(0)+$("#currentDay").text().charAt(1)+$("#currentDay").text().charAt(2);
      var numOfMonth=undefined;
      var next=undefined;
      switch (whatMonth) {
        case "Nov": numOfMonth="10"; next=11;
        break;
        case "Oct": numOfMonth="9"; next=10;
        break;
        case "Sep": numOfMonth="8"; next=9;
        break;
        case "Aug": numOfMonth="7"; next=8;
        break;
        case "Jul": numOfMonth="6"; next=7;
        break;
        case "Jun": numOfMonth="5"; next=6;
        break;
        case "May": numOfMonth="4"; next=5;
        break;
        case "Apr": numOfMonth="3"; next=4;
        break;
        case "Mar": numOfMonth="2"; next=3;
        break;
        case "Feb": numOfMonth="1"; next=2;
        break;
        case "Jan": numOfMonth="0"; next=1;
        break;
        case "Dec": numOfMonth="11"; next=0;
        break;
      }
      var nextMonth= parseInt(moment().format(numOfMonth));
      var firstOfMonth = new Date(currentYear,next,1);
      var date=moment(firstOfMonth).format('MMM D YYYY');
      var d = new Date(date);
      var day = d.getDay();
      var displayMonth = new Date(currentYear,next);
      $("#currentDay").html(moment(displayMonth).format('MMMM YYYY'));
      switch (true) {
        case day==0:
          z=6;
          r =1;
           for (z=6;r<=daysInMonth(nextMonth,currentYear);r++,z++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==1:
          z=0;
          r =1;
           for (z=0;r<=daysInMonth(nextMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==2:
          z=1;
          r =1;
           for (z=1;r<=daysInMonth(nextMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==3:
          z=2;
          r =1;
           for (z=2;r<=daysInMonth(nextMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==4:
          z=3;
          r =1;
           for (z=3;r<=daysInMonth(nextMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        case day==5:
          z=4;
          r =1;
           for (z=4;r<=daysInMonth(nextMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
           case day==6:
          z=5;
          r =1;
           for (z=5;r<=daysInMonth(nextMonth,currentYear);z++,r++) {
            var dateButton = $('<button></button>');
            var quoteButton = $('<button></button>');
            $(dateButton).addClass('dateButton');
            $(quoteButton).addClass('quoteButton');
            $(dateButton).eq(0).text(r);
            $(quoteButton).text("QOD");
            $('.box').eq(z).append(dateButton);
            $('.box').eq(z).append(quoteButton);
           }
           break;
        }
      var f=0;
      for(f=0;f<=42;f++) {
        if ($('.box').eq(f).children().length==0) {
          $('.box').eq(f).css('backgroundColor','grey');
        }
      }
      if ($('#currentDay').text()==moment().format('MMMM YYYY')) {
        var i =0;
      for (i=0;i<=31;i++) {
          if ($('.dateButton').eq(i).text()>dayNum){
            $('.dateButton').eq(i).parent().css('backgroundColor','#a4d1a2');
            $('.dateButton').eq(i).parent().addClass('future');
          }
          if ($('.dateButton').eq(i).text()<dayNum){
            $('.dateButton').eq(i).parent().css('backgroundColor','#ffcccb');
            $('.dateButton').eq(i).parent().addClass('past');
          }
          if ($('.dateButton').eq(i).text()==dayNum){
            $('.dateButton').eq(i).parent().css('backgroundColor','#add8e6');
            $('.dateButton').eq(i).parent().addClass('present');
          }
      }
      $('.dateButton').hover(onEnter,onLeave);
            
            function onEnter (){
                if ($(this).parent().hasClass('present')) {
                    $(this).css({"background-color":"#1e3f66","color":"white"});
                }
                if ($(this).parent().hasClass('past')) {
                    $(this).css({"background-color":"#990000","color":"white"});
                }
                if ($(this).parent().hasClass('future')) {
                    $(this).css({"background-color":"#006400","color":"white"});
                }
            };
            function onLeave (){
                $(this).css({"background-color":"transparent","color":" #45464c"});
            };
    }
        else {
          $('.box').css('backgroundColor','lightgray');
      $('.dateButton').hover(onEnter2,onLeave2);
      function onEnter2 (){
            $(this).css({"background-color":"lightslategray","color":"white"})
      };
        function onLeave2 (){
            $(this).css({"background-color":"transparent","color":" #45464c"});
      };
      var f=0;
      for(f=0;f<=42;f++) {
        if ($('.box').eq(f).children().length==0) {
          $('.box').eq(f).css('backgroundColor','grey');
        }
      }
    $('.dateButton').attr('data-toggle',"modal");
    $('.dateButton').attr('data-target',"#eventModal");
    $('.dateButton').click(function() {
      var m=0;
      $('#placeEventsHere').children().remove();
      for (m=0;m<eventDetails.length;m++) {
        if(eventDetails[m]['day']==$(this).text() && eventDetails[m]['month'].charAt(1)==$('#currentDay').text().charAt(1) && eventDetails[m]['month'].charAt(2)==$('#currentDay').text().charAt(2)) {
          var eventHolder = $('<p></p>');
          $(eventHolder).text(eventDetails[m]['event'] + " @ " + eventDetails[m]['location'] + " from " + eventDetails[m]['start'] + " to " + eventDetails[m]['end']);
          $('#placeEventsHere').append($(eventHolder).last());
        }
      }
    }
);
fetch("https://type.fit/api/quotes")
  .then(function(response) {
    return response.json();
  })
  .then(function(data) {
    v=0;
    for (v=0;v<$('.quoteButton').length;v++) {
    var pickQuote = Math.floor(Math.random()*1643);
    $('.quoteButton').eq(v).popover({title: "Today's Quote", content: data[pickQuote]['text'] + " - " + data[pickQuote]['author'], placement: "top"});
    }
  });
}
if ($('#currentDay').html()==moment().format('MMMM YYYY')) {
    $('#showToday').css('display','block');
  }
  else {
    $('#showToday').css('display','none');
  }
}
  </script>
</body>
</html>
    